<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Omas: Open MEI addressability service</title>

   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
   <link rel="stylesheet" href="../css/style.css">
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
   <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min.js"></script>
   <script src="../js/verovio.js"></script>

  <!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

</head>

<body>
  <a href="https://github.com/umd-mith/ema/"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"></a>
  <div class="container">
    <div class="row">
      <div class="col-md-8">
      <img height="100px" src="images/omas-logo.png" alt="Omas"/>
        <h2>Open MEI addressability service</h2>
      </div>
      <div class="col-md-4">
        <a href="http://mith.umd.edu/research/project/enhancing-music-notation-addressability/">
          <img height="130px" src="http://mith.umd.edu/wp-content/uploads/2014/07/project_ema.png"/>
        </a>
      </div>
    </div>
    <div class="row" id="main">
      <div id="info"></div>
      <div id="score"></div>
    </div>
  </div>

<script type="text/javascript">
var mei = sessionStorage.getItem("MEI");
if (mei == null) {
  $("#info").append("<p>No MEI to display. <a href='/omas'>Go back</a>.</p>");
}
else {
  var expr = sessionStorage.getItem("URL");
  var urlInfo = '<div class="bs-callout bs-callout-success">\
    <h4>Displaying selection URL</h4>\
    <a href="'+expr+'">'+expr+'</a>\
  </div><p><a href="/omas">Make another selection</a></p>';
  $("#info").append(urlInfo);
  var vrvToolkit = new verovio.toolkit();
  options = JSON.stringify({
    pageWidth: $("body").width(),
    ignoreLayout: 1,
    border: 100,
    scale: 50
  });
  vrvToolkit.setOptions(options);
  var svg = vrvToolkit.renderData( mei + "\n", "" );
  $("#score").html(svg);
}
</script>

</body>
</html>